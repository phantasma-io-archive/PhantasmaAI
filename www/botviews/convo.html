{{#each chat}}
<div class="row mt-4">
    {{#if isSpecky}}
    <div class="col-11">
        <div class="p-3 me-3 border chatbubble box-shadow">
            <p>{{{text}}}</p>
        </div>
    </div>
    <div class="col-1 d-flex align-items-center align-content-center" style="min-width:48px">
        <img src="assets/specky.png" alt="avatar 1" class="me-3" style="width: 45px; height: 45px;">
    </div>
    {{#else}}
    <div class="col-1 d-flex align-items-center align-content-center" style="min-width:48px">
        <img src="assets/avatar.jpg" alt="avatar 1" class="ms-3" style="width: 45px; height: 45px;">
    </div>
    <div class="col-11">
        <div class="p-3 border chatbubble chatbubble-user box-shadow">
            <p>{{{text}}}</p>
        </div>
    </div>
    {{/if}}
</div>
{{/each}}

{{#if pending}}
<div class="row mt-4">
    <!--<div id="loadingSpinner" class="d-flex justify-content-end">
        <div class="p-3 me-3 border chatbubble box-shadow">
            <p class="small mb-0">Hmm<span id="dots" style="min-width:20px; display:inline-block;"></span></p>
        </div>
    </div>
    <div class="col-1 d-flex align-items-center align-content-center" style="min-width:48px">
        <img src="assets/specky.png" alt="avatar 1" class="me-3" style="width: 45px; height: 45px;">
    </div>-->
    <div id="loadingSpinner" class="d-flex flex-row justify-content-end mt-4">
        <div class="p-3 me-3 border chatbubble box-shadow ">
            <p class="small mb-0">Hmm<span id="dots" style="min-width:20px; display:inline-block;"></span></p>
        </div>
        <div class="col-1 d-flex align-items-center align-content-center" style="min-width:48px">
            <img src="assets/specky.png" alt="avatar 1" class="me-3" style="width: 45px; height: 45px;">
        </div>
    </div>
</div>


<script>
    startChatInterval();
</script>
{{#else}}
<script>
    if (chatInterval) {
        clearInterval(chatInterval);  // Stop the current interval
        chatInterval = -1;
    }

    if (dotsInterval) {
        clearInterval(dotsInterval);  // Stop the current interval
        dotsInterval = -1;
    }

    $('#user_request_text').prop('disabled', false);
    $('#sendBtn').prop('disabled', false);
</script>
{{/if}}